var mvc=(function(){var a;return{create:function(c){var b=_.clone(mvc);b.init(c)},init:function(b){this.dependencies.init();this.dependencies.map.singleton("dependencies",this.dependencies);this.dependencies.map.singleton("events",this.events);this.dependencies.map.singleton("dispatch",this.events.dispatch);this.dependencies.map.singleton("views",this.views,["events","dependencies"]);this.dependencies.map.singleton("controllers",this.controllers,["events","dependencies"]);this.views.init(this.events,this.dependencies);this.controllers.init(this.events,this.dependencies);this.controllers.register("start_up",b);this.events.dispatch("start_up")},events:(function(){var c,b;return{init:function(){b=c={}},listen:function(e,f,d){if(!c[e]){c[e]={};c[e].callbacks=[];c[e].contexts=[]}c[e].callbacks.push(f);c[e].contexts.push(d||this)},remove:function(f,g){var e=c[f].callbacks,d=_.indexOf(e,g);if(d!==-1){e.splice(d,1)}},removeAll:function(d){c[d]=[]},dispatch:function(g,h){if(c[g]){var f=c[g].callbacks,j=c[g].contexts;if(f){for(var e=0,d=f.length;e<d;e++){f[e].apply(j[e],h)}}}}}})(),models:(function(){var d,b,c;return{init:function(e,f){d={};b=e;c=f},register:function(f,e){if(d[f]){return}d[f]=e;if(e.dependencies){c.inject(e,e.dependencies)}if(e.init){e.init()}e.dispatch=b},get:function(e){return d[e]}}})(),views:(function(){var b,c;return{init:function(e,d){b=e;c=d},register:function(j,f){var d=_.clone(f),g=_.functions(d);if(d.dependencies){c.inject(d,d.dependencies)}for(var h=0,e=g.length;h<e;h++){if(g[h]!=="init"){b.listen(g[h],d[g[h]],d)}}d.element=j;d.events=b;if(d.init){d.init()}}}})(),controllers:(function(){var b,d,c;return{init:function(f,e){c=this;b=f;d=e},register:function(g,h,e){var f={dispatch:b.dispatch,map:{event:c.register,singleton:a.models.register,view:function(j,i){_.each(j,function(k){a.views.register(k,i)})},value:d.map.singleton,instance:d.map.instance}};if(e){d.inject(f,e)}b.listen(g,h,f)}}})(),dependencies:(function(){var d,c,b;return{init:function(e){d=e;c={};b={}},inject:function(e,f){_.each(f,function(g){if(d.get(g)){e[g]=d.get(g);return}else{if(b[g]){e[g]=b[g];return}else{if(c[g]){e[g]=_.clone(c[g])}}}})},map:{instance:function(f,e){c[f]=e},singleton:function(f,e){if(!b[f]){b[f]=e}}}}})()}})();