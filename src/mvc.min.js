var mvc=function(a){var b,c;b=mvc.events();c=mvc.dependencies();if(!a){throw new Error("No config object found")}if(a.models){mvc.models(a.models,b,c)}if(a.views){mvc.views(a.views,b,c)}if(a.controllers){mvc.controllers(a.controllers,b,c)}};mvc.models=function(c,a,b){if(!c){throw new Error("No models found")}_.each(c,function(d,e){b.register(e,d.proxy);d.proxy.dispatch=a.dispatch;if(d.proxy.init){d.proxy.init()}})};mvc.views=function(b,c,d){var e,f,a;a=function(g){if(!g){throw new Error("A view object must be passed")}};e=function(g){if(!g.mediator){throw new Error("A mediator must be defined on view objects")}if(g.element){g.mediator.element=g.element}if(g.requires){d.inject(g.mediator,g.requires)}g.mediator.dispatch=c.dispatch;if(g.mediator.init){g.mediator.init()}};f=function(g){_.each(_.functions(g.mediator),function(h){if(h!=="init"&&h!=="dispatch"){c.listen(h,g.mediator[h],g.mediator)}})};a(b);_.each(b,function(g){f(g);e(g)})};mvc.controllers=function(c,a,b){_.each(c,function(d,f){var e={dispatch:a.dispatch};if(!_.isFunction(d.command)){throw new Error("No command function found")}if(d.requires&&!_.isArray(d.requires)){throw new Error("Requirements must be an array")}if(d.requires){b.inject(e,d.requires)}a.listen(f,d.command,e)})};mvc.events=function(){var e,c,d,b,a;e={};c=function(g,h,f){d(g);a(h);if(!e[g]){e[g]=[]}e[g].push({fn:h,context:f})};d=function(f){if(typeof f!=="string"){throw new Error("An event string must be passed to events.dispatch")}};b=function(f){if(f&&!_.isArray(f)){throw new Error("params must be an array")}};a=function(f){if(!_.isFunction(f)){throw new Error("A callback function must be passed to events.dispatch")}};return{dispatch:function(f,g){d(f);b(g);if(e[f]){_.each(e[f],function(i){var h=i.context||this;i.fn.apply(h,g)})}},listen:function(g,h,f){c(g,h,f)}}};mvc.dependencies=function(){var e,d,a,b,c;e={};d=function(f){if(!_.isString(f)){throw new Error("Name parameter must be a string")}if(e[f]){throw new Error("Dependency already exists")}};a=function(f){if(!f){throw new Error("No dependency object found")}};b=function(f){if(!f){throw new Error("No target defined")}};c=function(f){if(!_.isArray(f)){throw new Error("No requires array found")}};return{inject:function(g,f){b(g);c(f);_.each(f,function(h){g[h]=e[h]})},register:function(g,f){a(f);d(g);e[g]=f}}};
